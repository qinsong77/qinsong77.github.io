<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.43">
    <style>
      :root {
        --c-bg: #fff;
      }
      html.dark {
        --c-bg: #22272e;
      }
      html, body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme');
			const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
			if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
				document.documentElement.classList.toggle('dark', true);
			}
    </script>
    <link rel="icon" href="/favicon.ico"><link rel="manifest" href="/manifest.webmanifest"><meta name="theme-color" content="#3eaf7c"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black"><meta name="msapplication-TileColor" content="#333"><link rel="apple-touch-icon" href="/icons/128.ico"><script>
			var _hmt = _hmt || [];
			(function() {
				var hm = document.createElement("script");
				hm.src = "https://hm.baidu.com/hm.js?b180689c6fba69ad8ef56c3e0034ce9f";
				var s = document.getElementsByTagName("script")[0]; 
				s.parentNode.insertBefore(hm, s);
			})();
			</script><title>从零搭建 webpack5 + React + Typescript + Jest 基础模版 | Sysuke' World</title><meta name="description" content="personal frontend noteBook power by VuePress & GitHub Page">
    <link rel="modulepreload" href="/assets/app.a96f585b.js"><link rel="modulepreload" href="/assets/webpack5ReactTs.html.bc58c6d0.js"><link rel="modulepreload" href="/assets/webpack5ReactTs.html.f747f8f6.js"><link rel="prefetch" href="/assets/index.html.5b1afdb6.js"><link rel="prefetch" href="/assets/emptyTemplate.html.79c444f3.js"><link rel="prefetch" href="/assets/word.html.eb2fb714.js"><link rel="prefetch" href="/assets/index.html.b4e3022b.js"><link rel="prefetch" href="/assets/backTrack.html.2a1c3a4c.js"><link rel="prefetch" href="/assets/dynamic.html.ac9f5886.js"><link rel="prefetch" href="/assets/interview.html.92fdae6c.js"><link rel="prefetch" href="/assets/leetCode.html.6ab77b5d.js"><link rel="prefetch" href="/assets/sort.html.5d76dfaa.js"><link rel="prefetch" href="/assets/index.html.51e6b325.js"><link rel="prefetch" href="/assets/blog.html.d2bd9947.js"><link rel="prefetch" href="/assets/framework.html.90d00583.js"><link rel="prefetch" href="/assets/index.html.b742e5de.js"><link rel="prefetch" href="/assets/leetcode.html.ea57b21c.js"><link rel="prefetch" href="/assets/index.html.dc6bd27b.js"><link rel="prefetch" href="/assets/docker.html.8829890d.js"><link rel="prefetch" href="/assets/index.html.07da3fb4.js"><link rel="prefetch" href="/assets/index.html.e346dd44.js"><link rel="prefetch" href="/assets/fileMerge.html.755b3635.js"><link rel="prefetch" href="/assets/koa.html.3dd81d57.js"><link rel="prefetch" href="/assets/index.html.da59e93b.js"><link rel="prefetch" href="/assets/index.html.1b0386d5.js"><link rel="prefetch" href="/assets/index.html.fddde5b1.js"><link rel="prefetch" href="/assets/howUiLibraryBundle.html.2c489594.js"><link rel="prefetch" href="/assets/monorepoPnpmTurboRepo.html.868978c4.js"><link rel="prefetch" href="/assets/rollup-build-react-library.html.b933730a.js"><link rel="prefetch" href="/assets/Combat.html.9e0b3725.js"><link rel="prefetch" href="/assets/index.html.cbcacbe7.js"><link rel="prefetch" href="/assets/guideAndConfigSetting.html.fb7ea89f.js"><link rel="prefetch" href="/assets/jest.html.d73073fb.js"><link rel="prefetch" href="/assets/rtl.html.bc313fd9.js"><link rel="prefetch" href="/assets/index.html.90822aa8.js"><link rel="prefetch" href="/assets/microapp.html.6f91e95c.js"><link rel="prefetch" href="/assets/qiankun.html.ba45be9a.js"><link rel="prefetch" href="/assets/BFC.html.2103c9c9.js"><link rel="prefetch" href="/assets/index.html.47bd4b3a.js"><link rel="prefetch" href="/assets/demo.html.9bf73476.js"><link rel="prefetch" href="/assets/flex_grid.html.039f21f9.js"><link rel="prefetch" href="/assets/onepx.html.6e6fae00.js"><link rel="prefetch" href="/assets/index.html.4f35415b.js"><link rel="prefetch" href="/assets/canvas.html.0b9dbdba.js"><link rel="prefetch" href="/assets/safety.html.4c9f3b60.js"><link rel="prefetch" href="/assets/index.html.0cce74fe.js"><link rel="prefetch" href="/assets/agile-collections.html.5b850786.js"><link rel="prefetch" href="/assets/component_library_design.html.57e6f2ac.js"><link rel="prefetch" href="/assets/http.html.70f6ea72.js"><link rel="prefetch" href="/assets/https.html.364e436d.js"><link rel="prefetch" href="/assets/microservices.html.87f377aa.js"><link rel="prefetch" href="/assets/miniprogram.html.1b927425.js"><link rel="prefetch" href="/assets/mobile.html.f822daee.js"><link rel="prefetch" href="/assets/network.html.8abed134.js"><link rel="prefetch" href="/assets/performance.html.861ff708.js"><link rel="prefetch" href="/assets/ssr.html.cf622d06.js"><link rel="prefetch" href="/assets/thought.html.a0467a7a.js"><link rel="prefetch" href="/assets/websocket.html.c004853c.js"><link rel="prefetch" href="/assets/index.html.366e0c33.js"><link rel="prefetch" href="/assets/achieve.html.8edec2d4.js"><link rel="prefetch" href="/assets/alwaysNote.html.81a355fc.js"><link rel="prefetch" href="/assets/context_execution_stack_this.html.90a1037d.js"><link rel="prefetch" href="/assets/event_loop.html.da82091f.js"><link rel="prefetch" href="/assets/extend.html.f51a4ffa.js"><link rel="prefetch" href="/assets/learn.html.6b201b66.js"><link rel="prefetch" href="/assets/prototype.html.ede15e09.js"><link rel="prefetch" href="/assets/type_conversion.html.86165e81.js"><link rel="prefetch" href="/assets/usedFunc.html.602b8fa4.js"><link rel="prefetch" href="/assets/var_type.html.5cf071ab.js"><link rel="prefetch" href="/assets/index.html.53f2ccd5.js"><link rel="prefetch" href="/assets/ahooks.html.fa54fd48.js"><link rel="prefetch" href="/assets/build_mini_react.html.94d58c9b.js"><link rel="prefetch" href="/assets/collection.html.5f1371cb.js"><link rel="prefetch" href="/assets/next.html.386670ad.js"><link rel="prefetch" href="/assets/react_around.html.548bee7c.js"><link rel="prefetch" href="/assets/react_hooks.html.af3fc7e9.js"><link rel="prefetch" href="/assets/react_native.html.d3cd7157.js"><link rel="prefetch" href="/assets/Combat.html.34609d70.js"><link rel="prefetch" href="/assets/index.html.37431540.js"><link rel="prefetch" href="/assets/guideAndConfigSetting.html.cbf027d9.js"><link rel="prefetch" href="/assets/jest.html.fd1b2404.js"><link rel="prefetch" href="/assets/rtl.html.42b8cdf8.js"><link rel="prefetch" href="/assets/index.html.c3b1e590.js"><link rel="prefetch" href="/assets/typescript_with_react.html.8b30f403.js"><link rel="prefetch" href="/assets/index.html.91af7fb8.js"><link rel="prefetch" href="/assets/alwaysNote.html.d75c2c3a.js"><link rel="prefetch" href="/assets/vue3.html.4ca6b758.js"><link rel="prefetch" href="/assets/vuex.html.4951eb8e.js"><link rel="prefetch" href="/assets/index.html.ea4fa46d.js"><link rel="prefetch" href="/assets/babel.html.204782be.js"><link rel="prefetch" href="/assets/buildAndModuleFederation.html.af436af0.js"><link rel="prefetch" href="/assets/study_video_summary.html.1b33d598.js"><link rel="prefetch" href="/assets/vite2.html.2d93e477.js"><link rel="prefetch" href="/assets/webpack5.html.01313a5d.js"><link rel="prefetch" href="/assets/404.html.e275e9a9.js"><link rel="prefetch" href="/assets/index.html.6a27dc1c.js"><link rel="prefetch" href="/assets/emptyTemplate.html.b85a3d74.js"><link rel="prefetch" href="/assets/word.html.c6f13ca4.js"><link rel="prefetch" href="/assets/index.html.f4fba08c.js"><link rel="prefetch" href="/assets/backTrack.html.dae5e125.js"><link rel="prefetch" href="/assets/dynamic.html.b4cb4a32.js"><link rel="prefetch" href="/assets/interview.html.07f233e5.js"><link rel="prefetch" href="/assets/leetCode.html.9860dcb4.js"><link rel="prefetch" href="/assets/sort.html.36fcf4a5.js"><link rel="prefetch" href="/assets/index.html.c6afaf4e.js"><link rel="prefetch" href="/assets/blog.html.3f0bcf1d.js"><link rel="prefetch" href="/assets/framework.html.9ed61fd5.js"><link rel="prefetch" href="/assets/index.html.7110e085.js"><link rel="prefetch" href="/assets/leetcode.html.b4fe31b5.js"><link rel="prefetch" href="/assets/index.html.7143c1fa.js"><link rel="prefetch" href="/assets/docker.html.7368c091.js"><link rel="prefetch" href="/assets/index.html.4edc4b7e.js"><link rel="prefetch" href="/assets/index.html.5a0bee1d.js"><link rel="prefetch" href="/assets/fileMerge.html.2dc5279b.js"><link rel="prefetch" href="/assets/koa.html.b3b82e14.js"><link rel="prefetch" href="/assets/index.html.15f19b53.js"><link rel="prefetch" href="/assets/index.html.464954f7.js"><link rel="prefetch" href="/assets/index.html.656ba2f8.js"><link rel="prefetch" href="/assets/howUiLibraryBundle.html.76c4e7b3.js"><link rel="prefetch" href="/assets/monorepoPnpmTurboRepo.html.a0b6922a.js"><link rel="prefetch" href="/assets/rollup-build-react-library.html.3383f488.js"><link rel="prefetch" href="/assets/Combat.html.1ee1bbbb.js"><link rel="prefetch" href="/assets/index.html.bd8862a3.js"><link rel="prefetch" href="/assets/guideAndConfigSetting.html.304599f9.js"><link rel="prefetch" href="/assets/jest.html.ff59c388.js"><link rel="prefetch" href="/assets/rtl.html.eb9ad411.js"><link rel="prefetch" href="/assets/index.html.edbf8c03.js"><link rel="prefetch" href="/assets/microapp.html.6a59be38.js"><link rel="prefetch" href="/assets/qiankun.html.73ec7ed8.js"><link rel="prefetch" href="/assets/BFC.html.5e3a9b58.js"><link rel="prefetch" href="/assets/index.html.0804a9c7.js"><link rel="prefetch" href="/assets/demo.html.a9fc0122.js"><link rel="prefetch" href="/assets/flex_grid.html.ae9b7d53.js"><link rel="prefetch" href="/assets/onepx.html.530eb5a0.js"><link rel="prefetch" href="/assets/index.html.4c465d48.js"><link rel="prefetch" href="/assets/canvas.html.9e423c46.js"><link rel="prefetch" href="/assets/safety.html.e89a6bb9.js"><link rel="prefetch" href="/assets/index.html.3a639b6c.js"><link rel="prefetch" href="/assets/agile-collections.html.3f2c101a.js"><link rel="prefetch" href="/assets/component_library_design.html.8c254c99.js"><link rel="prefetch" href="/assets/http.html.371be1b1.js"><link rel="prefetch" href="/assets/https.html.96caf5ff.js"><link rel="prefetch" href="/assets/microservices.html.f01fca00.js"><link rel="prefetch" href="/assets/miniprogram.html.c4bf36ca.js"><link rel="prefetch" href="/assets/mobile.html.ea9f4507.js"><link rel="prefetch" href="/assets/network.html.f830d4cc.js"><link rel="prefetch" href="/assets/performance.html.59635c36.js"><link rel="prefetch" href="/assets/ssr.html.c36598e4.js"><link rel="prefetch" href="/assets/thought.html.f5b9de62.js"><link rel="prefetch" href="/assets/websocket.html.c8cd49a2.js"><link rel="prefetch" href="/assets/index.html.51d16b26.js"><link rel="prefetch" href="/assets/achieve.html.578c01a2.js"><link rel="prefetch" href="/assets/alwaysNote.html.695933f7.js"><link rel="prefetch" href="/assets/context_execution_stack_this.html.f7a94b2f.js"><link rel="prefetch" href="/assets/event_loop.html.8e7dbbcd.js"><link rel="prefetch" href="/assets/extend.html.d74cdb4f.js"><link rel="prefetch" href="/assets/learn.html.6ea6a0a4.js"><link rel="prefetch" href="/assets/prototype.html.b229711a.js"><link rel="prefetch" href="/assets/type_conversion.html.3ff094c9.js"><link rel="prefetch" href="/assets/usedFunc.html.3990e5f7.js"><link rel="prefetch" href="/assets/var_type.html.e3fb9e7f.js"><link rel="prefetch" href="/assets/index.html.0592ef58.js"><link rel="prefetch" href="/assets/ahooks.html.8800918c.js"><link rel="prefetch" href="/assets/build_mini_react.html.7a612060.js"><link rel="prefetch" href="/assets/collection.html.f6c30145.js"><link rel="prefetch" href="/assets/next.html.a80dcfdf.js"><link rel="prefetch" href="/assets/react_around.html.4fc7c087.js"><link rel="prefetch" href="/assets/react_hooks.html.e1631c1a.js"><link rel="prefetch" href="/assets/react_native.html.fb20f501.js"><link rel="prefetch" href="/assets/Combat.html.a6cbafdf.js"><link rel="prefetch" href="/assets/index.html.b71f7b76.js"><link rel="prefetch" href="/assets/guideAndConfigSetting.html.3f037b6c.js"><link rel="prefetch" href="/assets/jest.html.139dcba9.js"><link rel="prefetch" href="/assets/rtl.html.1002d838.js"><link rel="prefetch" href="/assets/index.html.0dfc29b6.js"><link rel="prefetch" href="/assets/typescript_with_react.html.96bf6c82.js"><link rel="prefetch" href="/assets/index.html.3f4db987.js"><link rel="prefetch" href="/assets/alwaysNote.html.b2b6c364.js"><link rel="prefetch" href="/assets/vue3.html.0fa33c98.js"><link rel="prefetch" href="/assets/vuex.html.027cf6de.js"><link rel="prefetch" href="/assets/index.html.c6de05f2.js"><link rel="prefetch" href="/assets/babel.html.e717e2db.js"><link rel="prefetch" href="/assets/buildAndModuleFederation.html.f9118144.js"><link rel="prefetch" href="/assets/study_video_summary.html.507ea37c.js"><link rel="prefetch" href="/assets/vite2.html.af0dc41a.js"><link rel="prefetch" href="/assets/webpack5.html.f8079cc6.js"><link rel="prefetch" href="/assets/404.html.dc00881d.js"><link rel="prefetch" href="/assets/404.ec588716.js"><link rel="prefetch" href="/assets/Layout.85c1d8ed.js"><link rel="prefetch" href="/assets/BlogLayout.e149c777.js"><link rel="prefetch" href="/assets/iconfont.81ae27d8.js"><link rel="prefetch" href="/assets/index.0b6f9a66.js">
    <link rel="stylesheet" href="/assets/style.d41d4842.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container no-sidebar"><!--[--><header class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/" class=""><img class="logo" src="/icons/128.ico" alt="Sysuke&#39; World"><span class="site-name can-hide">Sysuke&#39; World</span></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><nav class="navbar-items can-hide"><!--[--><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="前端"><span class="title">前端</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="前端"><span class="title">前端</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/fe/js" class="" aria-label="JavaScript"><!--[--><!--]--> JavaScript <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/fe/vue" class="" aria-label="Vue"><!--[--><!--]--> Vue <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/fe/typescript" class="" aria-label="Typescript"><!--[--><!--]--> Typescript <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/fe/react" class="" aria-label="React"><!--[--><!--]--> React <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/fe/css" class="" aria-label="CSS"><!--[--><!--]--> CSS <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/fe/dom" class="" aria-label="Dom"><!--[--><!--]--> Dom <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/fe/webpack" class="" aria-label="webpack"><!--[--><!--]--> webpack <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/fe/test" class="" aria-label="测试"><!--[--><!--]--> 测试 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/fe/frameWork" class="" aria-label="frameWork"><!--[--><!--]--> frameWork <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/fe/MicroFrontends" class="" aria-label="微前端"><!--[--><!--]--> 微前端 <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="算法"><span class="title">算法</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="算法"><span class="title">算法</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/algorithm/" class="" aria-label="数据结构"><!--[--><!--]--> 数据结构 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/algorithm/binaryTree" class="" aria-label="二叉树"><!--[--><!--]--> 二叉树 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/algorithm/sort" class="" aria-label="排序算法"><!--[--><!--]--> 排序算法 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/algorithm/leetcode" class="" aria-label="LeetCode"><!--[--><!--]--> LeetCode <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/algorithm/dynamic" class="" aria-label="动态规划"><!--[--><!--]--> 动态规划 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/algorithm/backTrack" class="" aria-label="回溯算法"><!--[--><!--]--> 回溯算法 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/algorithm/interview" class="" aria-label="面试记录"><!--[--><!--]--> 面试记录 <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><div class="navbar-item"><a href="/backEnd/node" class="" aria-label="后端"><!--[--><!--]--> 后端 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/interview/" class="" aria-label="面试"><!--[--><!--]--> 面试 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/demo" class="" aria-label="Demo"><!--[--><!--]--> Demo <!--[--><!--]--></a></div><div class="navbar-item"><a class="external-link" href="https://github.com/qinsong77/qinsong77.github.io" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--]--> GitHub <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><button class="toggle-dark-button" title="toggle dark mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><form class="search-box" role="search"><input type="search" autocomplete="off" spellcheck="false" value><!----></form></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-items"><!--[--><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="前端"><span class="title">前端</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="前端"><span class="title">前端</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/fe/js" class="" aria-label="JavaScript"><!--[--><!--]--> JavaScript <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/fe/vue" class="" aria-label="Vue"><!--[--><!--]--> Vue <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/fe/typescript" class="" aria-label="Typescript"><!--[--><!--]--> Typescript <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/fe/react" class="" aria-label="React"><!--[--><!--]--> React <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/fe/css" class="" aria-label="CSS"><!--[--><!--]--> CSS <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/fe/dom" class="" aria-label="Dom"><!--[--><!--]--> Dom <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/fe/webpack" class="" aria-label="webpack"><!--[--><!--]--> webpack <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/fe/test" class="" aria-label="测试"><!--[--><!--]--> 测试 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/fe/frameWork" class="" aria-label="frameWork"><!--[--><!--]--> frameWork <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/fe/MicroFrontends" class="" aria-label="微前端"><!--[--><!--]--> 微前端 <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="算法"><span class="title">算法</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="算法"><span class="title">算法</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/algorithm/" class="" aria-label="数据结构"><!--[--><!--]--> 数据结构 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/algorithm/binaryTree" class="" aria-label="二叉树"><!--[--><!--]--> 二叉树 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/algorithm/sort" class="" aria-label="排序算法"><!--[--><!--]--> 排序算法 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/algorithm/leetcode" class="" aria-label="LeetCode"><!--[--><!--]--> LeetCode <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/algorithm/dynamic" class="" aria-label="动态规划"><!--[--><!--]--> 动态规划 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/algorithm/backTrack" class="" aria-label="回溯算法"><!--[--><!--]--> 回溯算法 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/algorithm/interview" class="" aria-label="面试记录"><!--[--><!--]--> 面试记录 <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><div class="navbar-item"><a href="/backEnd/node" class="" aria-label="后端"><!--[--><!--]--> 后端 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/interview/" class="" aria-label="面试"><!--[--><!--]--> 面试 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/demo" class="" aria-label="Demo"><!--[--><!--]--> Demo <!--[--><!--]--></a></div><div class="navbar-item"><a class="external-link" href="https://github.com/qinsong77/qinsong77.github.io" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--]--> GitHub <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><!----><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--[--><div class="theme-default-content"><h1 style="padding-bottom:0;margin-bottom:0;">从零搭建 webpack5 + React + Typescript + Jest 基础模版</h1></div><!--]--><!--]--><div class="theme-default-content"><!--[--><blockquote><p>not Done</p></blockquote><p><a href="https://github.com/qinsong77/webpack5-react-template" target="_blank" rel="noopener noreferrer">github<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><h2 id="初始化-package-json" tabindex="-1"><a class="header-anchor" href="#初始化-package-json" aria-hidden="true">#</a> 初始化 package.json</h2><p>这里使用<code>pnpm</code>管理<code>package</code>，<code>pnpm</code>相比npm，yarn最大的优点就是节约磁盘空间并提升安装速度，在我用<code>pnpm-workspace+turborepo</code>搭建monorepo的项目中，感触颇深，得益于pnpm，在monorepo下即使有几十个app+package，安装速度也在接受范围内。 所以后续的所有命令都使用<code>pnpm</code>完成。 初始化：</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">mkdir</span> webpack5-react-template
<span class="token builtin class-name">cd</span> webpack5-react-template 
<span class="token function">pnpm</span> init
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><img src="/assets/shoot1.42bcfdb0.png" alt=""> 先稍微介绍下<code>package.json</code>中几个主要的字段如<code>dependencies</code>,<code>devDependencies</code>,<code>peerDependencies</code>,<code>scripts</code>的意思。</p><ul><li>dependencies: 生产环境，项目运行的依赖（如：react,react-dom）</li><li>devDependencies: 开发环境，项目所需的依赖（如：webpack插件，打包插件，压缩插件，eslint等）</li><li>scripts: 指定了运行脚本命令的npm命令行缩写</li><li>private：如果设为true，无法通过<code>npm publish</code>发布代码。</li></ul><p>官网解释<a href="https://docs.npmjs.com/cli/v8/configuring-npm/package-json/" target="_blank" rel="noopener noreferrer">文档<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><h2 id="typescript" tabindex="-1"><a class="header-anchor" href="#typescript" aria-hidden="true">#</a> typescript</h2><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">pnpm</span> <span class="token function">add</span> typescript -D
<span class="token comment"># tsc --init命令创建tsconfig.json</span>
<span class="token function">pnpm</span> <span class="token builtin class-name">exec</span> tsc --init 
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>这个时候项目跟目录下会生成一份<code>tsconfig.json</code>文件，删除了多余的注释，内容如下:</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">{</span>
    <span class="token string">&quot;compilerOptions&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
        <span class="token string">&quot;target&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;es5&quot;</span>,
        <span class="token string">&quot;module&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;commonjs&quot;</span>,
        <span class="token string">&quot;esModuleInterop&quot;</span><span class="token builtin class-name">:</span> true,
        <span class="token string">&quot;forceConsistentCasingInFileNames&quot;</span><span class="token builtin class-name">:</span> true,
        <span class="token string">&quot;strict&quot;</span><span class="token builtin class-name">:</span> true,
        <span class="token string">&quot;skipLibCheck&quot;</span><span class="token builtin class-name">:</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>添加配置如下</p><div class="language-json5 ext-json5 line-numbers-mode"><pre class="language-json5"><code><span class="token punctuation">{</span>
  <span class="token comment">/* Visit https://aka.ms/tsconfig to read more about this file */</span>
  <span class="token property">&quot;$schema&quot;</span><span class="token operator">:</span> <span class="token string">&quot;https://json.schemastore.org/tsconfig&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;compilerOptions&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;target&quot;</span><span class="token operator">:</span> <span class="token string">&quot;es6&quot;</span><span class="token punctuation">,</span>  <span class="token comment">/* 指定 ECMAScript 目标版本：&#39;ES3&#39;、&#39;ES5&#39;（默认）、&#39;ES2015&#39;、&#39;ES2016&#39;、&#39;ES2017&#39;、&#39;ES2018&#39;、&#39;ES2019&#39;、&#39;ES2020&#39; 或 &#39;ESNEXT&#39;。 */</span>
    <span class="token property">&quot;module&quot;</span><span class="token operator">:</span> <span class="token string">&quot;esnext&quot;</span><span class="token punctuation">,</span> <span class="token comment">/*TS需要引用的库，即声明文件，es5 默认引用dom、es5、scripthost,如需要使用es的高级版本特性，通常都需要配置，如es8的数组新特性需要引入&quot;ES2019.Array&quot; */</span>
    <span class="token property">&quot;lib&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token string">&quot;dom&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;dom.iterable&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;esnext&quot;</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>  <span class="token comment">/* 指定要包含在编译中的库文件。 */</span>
    <span class="token property">&quot;allowJs&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">/* 不允许编译器编译JS，JSX文件 */</span>
    <span class="token property">&quot;noEmit&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">/* 不输出文件,即编译后不会生成任何js文件 */</span>

    <span class="token property">&quot;strict&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">/* 启用所有严格的类型检查选项。 */</span>

    <span class="token property">&quot;moduleResolution&quot;</span><span class="token operator">:</span> <span class="token string">&quot;node&quot;</span><span class="token punctuation">,</span> <span class="token comment">/** 模块解析策略，ts默认用node的解析策略，即相对的方式导入 */</span>
    <span class="token property">&quot;allowSyntheticDefaultImports&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">/* 允许从没有默认导出的模块中默认导入。 这不会影响代码发出，只是类型检查。 */</span>
    <span class="token property">&quot;esModuleInterop&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">/* 允许export=导出，由import from 导入 */</span>

    <span class="token property">&quot;noFallthroughCasesInSwitch&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>  <span class="token comment">/* 在 switch 语句中报告失败情况的错误。 */</span>

    <span class="token property">&quot;resolveJsonModule&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">/* 可以导入json文件 */</span>
    <span class="token property">&quot;isolatedModules&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">/* 将每个文件转换为一个单独的模块（类似于 &#39;ts.transpileModule&#39;）。 */</span>
    <span class="token property">&quot;jsx&quot;</span><span class="token operator">:</span> <span class="token string">&quot;react-jsx&quot;</span><span class="token punctuation">,</span>

    <span class="token property">&quot;skipLibCheck&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">/* 跳过声明文件的类型检查。 */</span>
    <span class="token property">&quot;forceConsistentCasingInFileNames&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">/* 禁止对同一文件的大小写不一致地引用。 */</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;include&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">&quot;src&quot;</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br></div></div><h2 id="引入react" tabindex="-1"><a class="header-anchor" href="#引入react" aria-hidden="true">#</a> 引入React</h2><p>安装react</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">pnpm</span> i react react-dom
<span class="token comment"># 安装类型校验</span>
<span class="token function">pnpm</span> i @types/react @types/react-dom -D
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>新建<code>src</code>目录，和<code>index.tsx</code>和<code>app.tsx</code>文件</p><div class="language-tsx ext-tsx line-numbers-mode"><pre class="language-tsx"><code><span class="token comment">// index</span>
<span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> React <span class="token keyword">from</span> <span class="token string">&#39;react&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> ReactDOM <span class="token keyword">from</span> <span class="token string">&#39;react-dom/client&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> App <span class="token keyword">from</span> <span class="token string">&#39;./App&#39;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> root <span class="token operator">=</span> ReactDOM<span class="token punctuation">.</span><span class="token function">createRoot</span><span class="token punctuation">(</span>
  document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&#39;root&#39;</span><span class="token punctuation">)</span> <span class="token keyword">as</span> HTMLElement
<span class="token punctuation">)</span><span class="token punctuation">;</span>
root<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">React.StrictMode</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">App</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">React.StrictMode</span></span><span class="token punctuation">&gt;</span></span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// app.tsx</span>
<span class="token keyword">const</span> <span class="token function-variable function">App</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>App<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>header</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>App-header<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
          Edit </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>code</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">src/App.tsx</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>code</span><span class="token punctuation">&gt;</span></span><span class="token plain-text"> and save to reload.
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span>
          <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>App-link<span class="token punctuation">&quot;</span></span>
          <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>https://reactjs.org<span class="token punctuation">&quot;</span></span>
          <span class="token attr-name">target</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>_blank<span class="token punctuation">&quot;</span></span>
          <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>noopener noreferrer<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
          Learn React
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>header</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> App<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br></div></div><h3 id="import-react-from-react-和-import-as-react-from-react-区别" tabindex="-1"><a class="header-anchor" href="#import-react-from-react-和-import-as-react-from-react-区别" aria-hidden="true">#</a> <code>import React from ‘react’</code> 和 <code>import * as React from &#39;react&#39;</code>区别</h3><p>示例代码</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// constant.js</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> a <span class="token operator">=</span> <span class="token number">1</span>
<span class="token keyword">const</span> b <span class="token operator">=</span> <span class="token number">2</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> b 

<span class="token comment">// index.ts</span>
<span class="token keyword">import</span> constant <span class="token keyword">from</span> <span class="token string">&#39;./constant&#39;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>constant<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>不管是 ts 还是 babel，在将 esm 编译为 cjs 的时候，对于 <code>export default</code> 的处理，都会放在一个 <code>default </code>的属性上，即 <code>module.exports.default = xxx</code>，上面编译的结果大致为：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token string">&quot;use strict&quot;</span><span class="token punctuation">;</span>
Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>exports<span class="token punctuation">,</span> <span class="token string">&quot;__esModule&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 标示这是一个 esm 模块</span>
exports<span class="token punctuation">.</span>a <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> b <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
exports<span class="token punctuation">.</span>default <span class="token operator">=</span> b<span class="token punctuation">;</span>

<span class="token comment">// index.ts</span>
<span class="token keyword">var</span> _constant <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;./constant&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// esm 和 cjs 的兼容处理</span>
<span class="token keyword">var</span> constant_1 <span class="token operator">=</span> _constant<span class="token punctuation">.</span>__esModule <span class="token operator">?</span> _constant <span class="token operator">:</span> <span class="token punctuation">{</span><span class="token keyword">default</span><span class="token operator">:</span> _constant<span class="token punctuation">}</span><span class="token punctuation">;</span> 
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>constant_1<span class="token punctuation">.</span>default<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>在默认情况下ts会将<code>esm</code>模块编译成<code>commonjs</code></p><ul><li>对于 <code>export default </code>的变量，ts会将其放在<code> module.exports</code> 的 <code>default</code> 属性上</li><li>对于 <code>export</code> 的变量，ts会将其放在 <code>module.exports</code> 对应变量名的属性上</li><li>额外给 <code>module.exports</code> 增加一个 <code>__esModule: true </code>的属性，用来告诉编译器，这本来是一个 esm 模块</li></ul><p>看一下npm包中react的导出</p><p><img src="/assets/shoot2.eb6ca9c5.png" alt=""></p><p>可以看到通过npm方式引用react时默认是以<code>commonjs</code>方式导出的，结合上面ts默认编译的规则，<code>import React from &#39;react&#39;</code> 会从 <code>exports.default</code> 上去拿代码，显然此时<code>default</code>属性不存在<code>commonjs</code>模块中，因此会导致打印<code>undefined</code>；而<code>import * as React from &#39;react&#39;</code> 则会把React作为为一个对象，因此不会有问题。</p><p>首先对于 <a href="https://github.com/facebook/react/blob/v16.12.0/packages/react/src/React.js" target="_blank" rel="noopener noreferrer">react v16.13.0<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> 之前的版本都是通过 <code>export default</code> 导出的，所以使用 <code>import React from &#39;react&#39;</code> 来导入 react，上面的 console.log(constant) 才不会是 undefined</p><p>但是从 <a href="https://github.com/facebook/react/blob/v16.13.0/packages/react/src/React.js" target="_blank" rel="noopener noreferrer">react v16.13.0<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> 开始，react 就改成了用 <code>export</code> 的方式导出了，如果在 ts 中使用 <code>import React from &#39;react&#39;</code> 则会有错误提示：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>TS1259: Module &#39;xxxx&#39; has no default export.
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>由于没有了 <code>default</code> 属性，所以上面编译后的代码<code> console.log(constant)</code> 输出的是 undefined，ts 会提示有错误。</p><h3 id="esmoduleinterop-和-allowsyntheticdefaultimports" tabindex="-1"><a class="header-anchor" href="#esmoduleinterop-和-allowsyntheticdefaultimports" aria-hidden="true">#</a> esModuleInterop 和 allowSyntheticDefaultImports</h3><p>上面的问题延伸一下，其实不仅仅是引入react，在esm中引入任何commonjs的模块在ts默认编译时都会有这样的问题，ts提供了<code>esModuleInterop</code> 和 <code>allowSyntheticDefaultImports</code> 这两个配置来影响ts默认的解析。</p><p><code>allowSyntheticDefaultImports</code>是一个类型检查的配置，它会把<code>import</code>没有<code>exports.default</code>的报错忽略，如果你的<code>target</code>是<code>es6</code>加上这个配置就够了，但如果你的目标代码是<code>es5</code>仅仅加上这个还不行，还需要使用<code>esModuleInterop</code>，因为它才会改变tsc的编译产物：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>// tsconfig.json

{
    &quot;compilerOptions&quot;: {
      &quot;module&quot;: &quot;commonjs&quot;,
      &quot;target&quot;: &quot;es5&quot;,
      &quot;esModuleInterop&quot;:true
    }
 }
 
// index.ts
import React from &#39;react&#39;;
console.log(React.useEffect)

// tsc产物
&quot;use strict&quot;;
var __importDefault = (this &amp;&amp; this.__importDefault) || function (mod) {
    return (mod &amp;&amp; mod.__esModule) ? mod : { &quot;default&quot;: mod };
};
Object.defineProperty(exports, &quot;__esModule&quot;, { value: true });
var react_1 = __importDefault(require(&quot;react&quot;));
console.log(react_1.default.useEffect);
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><p>在加上<code>esModuleInterop</code> 之后编译产物多了一个<code>_importDefault</code> 辅助函数，而他的作用就是给<code>module.exports</code> 加上<code>default</code> 属性。 根据 <a href="https://www.typescriptlang.org/tsconfig#allowSyntheticDefaultImports" target="_blank" rel="noopener noreferrer">ts官网<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>的说明 开启<code>esModuleInterop</code>的同时也会默认开启<code>allowSyntheticDefaultImports</code>,因此更推荐直接加<code>esModuleInterop</code>。</p><h2 id="项目目录" tabindex="-1"><a class="header-anchor" href="#项目目录" aria-hidden="true">#</a> 项目目录</h2><div class="language-markdown ext-md line-numbers-mode"><pre class="language-markdown"><code>react-ts-template
├── package.json
├── public # 存放html模板
├── script # webpack配置
│ ├── config # 配置文件
│ ├── utils # 
│ ├── webpack.common.ts
│ ├── webpack.development.ts
│ ├── webpack.production.ts
├── README.md
├── src
│ ├── assets # 存放会被 Webpack 处理的静态资源文件：一般是自己写的 js、css 或者图片等静态资源
│ │ ├── fonts # iconfont 目录
│ │ ├── images # 图片资源目录
│ │ ├── css # 全局样式目录
│ │ └── js # 全局js
│ ├── common # 存放项目通用文件
│ ├── components # 项目中通用的组件目录
│ ├── feature # 项目中通用的业务组件目录
│ ├── config # 项目配置文件
│ ├── pages # 项目页面目录
│ ├── typings # 项目中d.ts 声明文件目录
│ ├── types # 项目中声明文件
│ ├── uiLibrary # 组件库
│ ├── routes # 路由目录
│ ├── services # 和后端相关的文件目录
│ ├── store # redux 仓库
│ ├── utils # 全局通用工具函数目录
│ ├── App.tsx # App全局
│ ├── index.tsx # 项目入口文件
│ ├── index.scss # 项目入口引入的scss
└── tsconfig.json # TS 配置文件
└── tsconfig.webpack.json # 给ts-node指定tsconfig-paths时使用
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br></div></div><h2 id="webpack" tabindex="-1"><a class="header-anchor" href="#webpack" aria-hidden="true">#</a> webpack</h2><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">pnpm</span> <span class="token function">add</span> webpack webpack-cli webpack-dev-server webpack-merge -D
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>这里webpack的配置文件也使用typescript，需要额外配置，参考官网<a href="https://webpack.docschina.org/configuration/configuration-languages/" target="_blank" rel="noopener noreferrer">Configuration Languages<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p>要使用 Typescript 来编写 webpack 配置，你需要先安装必要的依赖，比如 Typescript 以及其相应的类型声明，类型声明可以从 <code>DefinitelyTyped</code> 项目中获取，依赖安装如下所示：</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">pnpm</span> <span class="token function">add</span> ts-node @types/node @types/webpack -D
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>值得注意的是你需要确保 <code>tsconfig.json</code> 的 <code>compilerOption</code>s 中 <code>module</code> 选项的值为 <code>commonjs</code>,否则 webpack 的运行会失败报错，因为 <code>ts-node</code> 不支持 <code>commonjs</code> 以外的其他模块规范。</p><p>官网有三种设置方式，这里选择第三种</p><p>先安装 <code>tsconfig-paths</code> 这个 npm 包，如下所示：</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">pnpm</span> <span class="token function">add</span> tsconfig-paths -D
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>然后添加<code>tsconfig.webpack.json</code></p><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;compilerOptions&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;module&quot;</span><span class="token operator">:</span> <span class="token string">&quot;commonjs&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;target&quot;</span><span class="token operator">:</span> <span class="token string">&quot;es5&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;esModuleInterop&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token property">&quot;allowSyntheticDefaultImports&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token property">&quot;downlevelIteration&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;include&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;webpack&quot;</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>package.json</p><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;build&quot;</span><span class="token operator">:</span> <span class="token string">&quot;cross-env TS_NODE_PROJECT=\&quot;tsconfig.webpack.json\&quot; webpack&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>之所以要添加 <code>cross-env</code>，是因为我们在直接使用 <code>TS_NODE_PROJECT</code> 时遇到过 &quot;TS_NODE_PROJECT&quot; unrecognized command 报错的反馈，添加<code> cross-env</code> 之后该问题也似乎得到了解决，可以查看这个<a href="https://github.com/webpack/webpack.js.org/issues/2733" target="_blank" rel="noopener noreferrer">issue<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><h3 id="安装相关插件" tabindex="-1"><a class="header-anchor" href="#安装相关插件" aria-hidden="true">#</a> 安装相关插件</h3><ul><li>html-webpack-plugin: 在webpack构建后生成html文件，同时把构建好入口js等文件引入到生成的html文件中。</li><li>mini-css-extract-plugin：抽取csc为单独的css文件.</li><li>css-minimizer-webpack-plugin： 使用 <a href="https://cssnano.co/" target="_blank" rel="noopener noreferrer">cssnano<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> 优化和压缩 CSS.</li><li>style-loader: 开发环境选择下使用<code>style-loader</code>, 它可以使用多个标签将 CSS 插入到 DOM 中，反应会更快</li><li>css-loader：css-loader 会对 <code>@import</code> 和 <code>url() </code>进行处理，就像 js 解析 <code>import/require()</code> 一样。</li><li>@pmmmwh/react-refresh-webpack-plugin &amp;&amp; react-refresh: react热更新</li><li>dotenv：可以将环境变量中的变量从 <code>.env </code>文件加载到 <code>p<wbr>rocess.env</code> 中。</li><li>cross-env： 运行跨平台设置和使用环境变量的脚本</li><li>@soda/friendly-errors-webpack-plugin: 用于美化控制台，良好的提示错误。</li><li>fork-ts-checker-webpack-plugin: runs TypeScript type checker on a separate process.</li><li>babel相关，后续单独罗列</li><li>postcss等，后续单独罗列</li></ul><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">pnpm</span> <span class="token function">add</span> html-webpack-plugin @pmmmwh/react-refresh-webpack-plugin react-refresh dotenv cross-env mini-css-extract-plugin css-minimizer-webpack-plugin style-loader css-loader @soda/friendly-errors-webpack-plugin fork-ts-checker-webpack-plugin -D
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="添加public文件夹" tabindex="-1"><a class="header-anchor" href="#添加public文件夹" aria-hidden="true">#</a> 添加public文件夹</h3><p>添加index.html</p><div class="language-html ext-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>en<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>utf-8<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>&lt;%= htmlWebpackPlugin.options.title %&gt;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>icon<span class="token punctuation">&quot;</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>&lt;%= htmlWebpackPlugin.options.publicPath %&gt;/favicon.ico<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>viewport<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>width=device-width, initial-scale=1<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>theme-color<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>#000000<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span>
      <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>description<span class="token punctuation">&quot;</span></span>
      <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>&lt;%= htmlWebpackPlugin.options.description %&gt;<span class="token punctuation">&quot;</span></span>
    <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>apple-touch-icon<span class="token punctuation">&quot;</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>&lt;%= htmlWebpackPlugin.options.publicPath %&gt;/logo192.png<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>noscript</span><span class="token punctuation">&gt;</span></span>You need to enable JavaScript to run this app.<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>noscript</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>root<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><h3 id="webpack中的指纹策略" tabindex="-1"><a class="header-anchor" href="#webpack中的指纹策略" aria-hidden="true">#</a> webpack中的指纹策略</h3><p>比如 <code>filename: &#39;[name].[hash].[ext]&#39;</code></p><ul><li>hash：以项目为单位，项目内容改变了，则会生成新的<code>hash</code>，内容不变则<code>hash</code>不变。 整个工程任何一个需要被打包的文件发生了改变，打包结果中的所有文件的hash值都会改变。</li><li>chunkhash：以<code>chunk</code>为单位，当一个文件内容改变，则整个<code>chunk</code>组的模块hash都会改变。</li></ul><p>比如： 假设打包出口有<code>a.123.js</code>和<code>c.123.js</code>，a文件中引入了b文件，修改了b文件的内容，重新的打包结果为<code>a.111.js</code>和<code>c.123.js</code> 的<code>hash</code>值会被影响，但是<strong>c的hash值不受影响</strong>。</p><ul><li>contenthash：以自身内容为单位，依赖不算。</li></ul><p>比如： 假设打包出口有<code>a.123.js</code>和<code>b.123.css</code>，a文件引入了b文件，修改了b文件的内容，重新打包结果为<code>a.123.js</code>和<code>b.111.css</code>，a的hash值不受影响</p><h3 id="静态资源" tabindex="-1"><a class="header-anchor" href="#静态资源" aria-hidden="true">#</a> 静态资源</h3><p>webpack 5 之前，通常使用</p><ul><li>raw-loader 将文件导入为字符串</li><li>url-loader 将文件作为data URL 内联到bundle中</li><li>file-loader 将文件发送到输出目录</li></ul><p>相比webpack5之前需要<code>url-loader</code>、<code>file-loader</code>等处理，在webpack5中直接内置了 <a href="https://webpack.docschina.org/guides/asset-modules/" target="_blank" rel="noopener noreferrer"><code>asset</code><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> 模块，</p><ul><li><code>asset/resource</code>发送一个单独的文件并导出 URL。之前通过使用<code>file-loader</code>实现</li><li><code>asset/inline</code> 导出一个资源的 data URI。之前通过使用<code>url-loader</code>实现。</li><li>asset/source导出资源的源代码。之前通过使用raw-loader实现。</li><li>asset在导出一个 data URI 和发送一个单独的文件之间自动选择。之前通过使用url-loader，并且配置资源体积限制实现。</li></ul><p>关于配置<code>type:&#39;asset&#39;</code>后，webpack 将按照默认条件，自动地在 <code>resource</code> 和 <code>inline</code> 之间进行选择：小于 8kb 的文件，将会视为 <code>inline</code> 模块类型，否则会被视为 <code>resource</code> 模块类型。</p><h2 id="babel-设置" tabindex="-1"><a class="header-anchor" href="#babel-设置" aria-hidden="true">#</a> babel 设置</h2><p>关于TS转JS，有三种方案</p><ul><li>tsc: 不好配合<code>webpack</code>使用，转换<code>es5</code>以后，一些语法特性不能转换。</li><li><a href="https://www.npmjs.com/package/ts-loader" target="_blank" rel="noopener noreferrer">ts-loader<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>: 可以做类型检查，可搭配<code>tsconfig.json</code>使用。</li><li><code>babel-loader</code> + <code>@babel/preset-typescript</code>, 插件丰富，提供缓存机制，后续兼容扩展更强，但做不了类型检查(可以使用<a href="https://www.npmjs.com/package/fork-ts-checker-webpack-plugin" target="_blank" rel="noopener noreferrer">Fork TS Checker Webpack Plugin<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>。（推荐）</li></ul><p>这里选择第三种，安装依赖：</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">pnpm</span> i babel-loader @babel/core @babel/preset-env @babel/preset-react @babel/preset-typescript core-js -D
<span class="token function">pnpm</span> i @babel/plugin-transform-runtime -D
<span class="token function">pnpm</span> <span class="token function">add</span> @babel/runtime
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><ul><li><a href="https://segmentfault.com/a/1190000021188054" target="_blank" rel="noopener noreferrer">@babel/preset-env 与@babel/plugin-transform-runtime 使用及场景区别<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://webpack.docschina.org/loaders/babel-loader" target="_blank" rel="noopener noreferrer">babel-loader<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>: 使用 Babel 和 webpack 转译 JavaScript 等文件，内部核心转译功能需要<code>@babel/core</code>这个核心库。</li><li>@babel/core: @babel/core是babel的核心库，所有的核心api都在这个库里，这些api可供<code>babel-loader</code>调用</li><li><a href="https://babel.docschina.org/docs/en/babel-preset-env/" target="_blank" rel="noopener noreferrer">@babel/preset-env<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>: 这是一个预设的插件集合，包含了一组相关的插件，Babel中是通过各种插件来指导如何进行代码转换。该插件包含所有es6转化为es5的翻译规则。可以做到按需加载我们需要的 polyfill</li></ul><blockquote><p>@babel/prest-env是babel转译过程中的一些预设，它负责将一些基础的es 6+语法，比如const/let...转译成为浏览器可以识别的低级别兼容性语法。这里需要注意的是@babel/prest-env并不会对于一些es6+高版本语法的实现，比如Promise等polyfill，你可以将它理解为语法层面的转化不包含高级别模块(polyfill)的实现。</p></blockquote><ul><li>@babel/runtime: is a library that contains Babel modular runtime helpers. preset-env的polyfill会污染全局环境，项目开发可以接受，但做library时最好避免，不应该污染全局，并且应该提供更好的打包体积和效率</li><li>@babel/plugin-transform-runtime: A plugin that enables the re-use of Babel&#39;s injected helper code to save on codesize. <ul><li>当开发者使用异步或生成器的时候，自动引入@babel/runtime/regenerator，开发者不必在入口文件做额外引入；</li><li>提供沙盒环境，避免全局环境的污染</li><li>移除babel内联的helpers，统一使用@babel/runtime/helpers代替，减小打包体积</li></ul></li><li><a href="https://babeljs.io/docs/en/babel-preset-react" target="_blank" rel="noopener noreferrer">@babel/preset-react<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>: Babel preset for all React plugins.是一组预设，所谓预设就是内置了一系列babel plugin去转化jsx代码成为我们想要的js代码</li><li>@babel/preset-typescript:这是一个插件，使Babel能够将TypeScript代码转化为JavaScript。</li><li>@babel/polyfill：@babel/preset-env只是提供了语法转换的规则，但是它并不能弥补浏览器缺失的一些新的功能，如一些内置的方法和对象，如Promise，Array.from等，此时就需要polyfill来做js的垫片，弥补低版本浏览器缺失的这些新功能。注意：Babel 7.4.0该包将被废弃</li><li>core-js：它是JavaScript标准库的polyfill，而且它可以实现按需加载。使用@babel/preset-env的时候可以配置core-js的版本和core-js的引入方式。</li><li>regenerator-runtime：提供generator函数的转码</li></ul><p><code>babel.config.js</code></p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token constant">IS_DEV</span> <span class="token operator">=</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">NODE_ENV</span> <span class="token operator">===</span> <span class="token string">&#39;development&#39;</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">presets</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">&#39;@babel/preset-env&#39;</span><span class="token punctuation">,</span>
    <span class="token punctuation">[</span>
      <span class="token string">&#39;@babel/preset-react&#39;</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        <span class="token literal-property property">runtime</span><span class="token operator">:</span> <span class="token string">&#39;automatic&#39;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">development</span><span class="token operator">:</span> <span class="token constant">IS_DEV</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token string">&#39;@babel/preset-typescript&#39;</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span><span class="token constant">IS_DEV</span> <span class="token operator">?</span> <span class="token punctuation">[</span><span class="token string">&#39;react-refresh/babel&#39;</span><span class="token punctuation">]</span> <span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><h3 id="browserslist" tabindex="-1"><a class="header-anchor" href="#browserslist" aria-hidden="true">#</a> browserslist</h3><p>browserslist实际上就是声明了一段浏览器的合集，我们的工具可以根据这个合集描述，针对性的输出兼容性代码，browserslist应用于babel、postcss等工具当中。</p><p>“&gt; 1%”表示兼容市面上使用量大于百分之一的浏览，“last 1 chrome version”表示兼容到谷歌的上一个版本，具体的可以使用命令npx browserslist &quot;&gt; 1%&quot;的方式查看都包含了哪些浏览器</p><p>browserslist可以在<code>package.json</code>文件配置，也可以单出写一个<code>.browserslistrc</code>文件进行配置。 工具会自动查找<code>.browserslistrc</code>中的配置，如果没有发现<code>.browserslistrc</code>文件，则会去package.json中查找</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>// 在.browserslistrc中的写法
&gt; 1%
last 2 versions

// 还可以配置不同环境下的规则（在.browserslistrc中）
[production]
&gt; 1%
ie 10

[development]
last 1 chrome version
last 1 firefox version

// 在package.json中的写法
{
  &quot;browserslist&quot;: [&quot;&gt; 1%&quot;, &quot;last 2 versions&quot;]
}

// 还可以配置不同环境下的规则（在package.json中）
// production和development取决你webpack中mode字段的配置
{
  &quot;browserslist&quot;: {
    &quot;production&quot;: [
     &quot;&gt;0.2%&quot;,
     &quot;not dead&quot;,
     &quot;not op_mini all&quot;
    ],
    &quot;development&quot;: [
     &quot;last 1 chrome version&quot;,
     &quot;last 1 firefox version&quot;,
     &quot;last 1 safari version&quot;
    ]
 }
}
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br></div></div><h2 id="postcss" tabindex="-1"><a class="header-anchor" href="#postcss" aria-hidden="true">#</a> postcss</h2><p>postcss其实就是类似css中的babel的作用，</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">pnpm</span> <span class="token function">add</span> postcss postcss-loader postcss-preset-env postcss-flexbugs-fixes postcss-normalize -D
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><h2 id="eslint-prettier" tabindex="-1"><a class="header-anchor" href="#eslint-prettier" aria-hidden="true">#</a> eslint, Prettier</h2><p><a href="https://eslint.org/" target="_blank" rel="noopener noreferrer">ESLint<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>是一个前端标准的静态代码检查工具，它可以根据配置的规则来检查代码是否符合规范。</p><p><strong><code>plugins</code> 只是开启了这个插件，而 <code>extends</code> 则会继承别人写好的一份 <code>.eslintrc</code> 的配置，这份配置不仅仅包括了 <code>rules</code> 还有 <code>parser</code>，<code>plugins</code> 之类的东西。</strong></p><p><strong>注意：要把 Prettier 的推荐配置 <code>plugin:prettier/recommended</code> 放在 <code>extends</code> 最后一项。</strong></p><p><a href="https://prettier.io/" target="_blank" rel="noopener noreferrer">Prettier<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>是一个代码格式化工具。 ESLint 是通过制定的的规范来检查代码的，这里的 <strong>规范</strong> 有两种：</p><ul><li>代码风格规范</li><li>代码质量规范</li></ul><p>Prettier 主要负责的是代码风格。</p><h3 id="extends-vs-plugins" tabindex="-1"><a class="header-anchor" href="#extends-vs-plugins" aria-hidden="true">#</a> <code>extends</code> vs <code>plugins</code></h3><p>这一节我想聊聊 ESLint 中 <code>extends</code> 和 <code>plugins</code> 这两个配置参数的区别，相信这会困扰很多人。</p><p>举个例子，假如我们要配置 ESLint x TypeScript，可以看到官网有这样的配置：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">root</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token literal-property property">parser</span><span class="token operator">:</span> <span class="token string">&#39;@typescript-eslint/parser&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">&#39;@typescript-eslint&#39;</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token keyword">extends</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">&#39;eslint:recommended&#39;</span><span class="token punctuation">,</span>
    <span class="token string">&#39;plugin:@typescript-eslint/recommended&#39;</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>神奇的是，当你去掉 <code>plugins</code> 之后发现 <code>eslint</code> 依然可以正常工作。更神奇的是，只要你写了 <code>extends</code>，那么连 <code>parser</code> 也可以不用加，要知道没有指定 <code>parser</code> 选项，eslint 可看不懂你的 TypeScript 文件。</p><p>所以说，到底是 <code>plugins</code> 加上了 TypeScript 的能力还是 <code>extends</code> 加上了 TypeScript 的规则呢？真让人头大，直到终于有一天受不了了，翻找了一下网上的资料发现了<a href="https://stackoverflow.com/questions/61528185/eslint-extends-vs-plugins-v2020" target="_blank" rel="noopener noreferrer">这个帖子<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>。</p><p>先来说结论吧：<strong><code>plugins</code> 只是开启了这个插件，而 <code>extends</code> 则会继承别人写好的一份 <code>.eslintrc</code> 的配置，这份配置不仅仅包括了 <code>rules</code> 还有 <code>parser</code>，<code>plugins</code> 之类的东西。</strong></p><p>所以回到问题，为什么在继承了 <code>plugin:@typescript-eslint/recommended</code> 之后就可以不写 <code>plugins</code> 和 <code>parser</code> 呢？因为别人已经把配置都放在 <code>recommended</code> 这份配置表里了，这样对使用的人来说，就可以少写很多配置项了。</p><p>也就是说，下面两份配置是等价的：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">parser</span><span class="token operator">:</span> <span class="token string">&quot;@typescript-eslint/parser&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">parserOptions</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">sourceType</span><span class="token operator">:</span> <span class="token string">&quot;module&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;@typescript-eslint&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token keyword">extends</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token literal-property property">rules</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string-property property">&quot;@typescript-eslint/explicit-function-return-type&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token string">&quot;error&quot;</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        <span class="token literal-property property">allowExpressions</span><span class="token operator">:</span> <span class="token boolean">true</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>以及</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token keyword">extends</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;plugin:@typescript-eslint/recommended&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token literal-property property">rules</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string-property property">&quot;@typescript-eslint/explicit-function-return-type&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token string">&quot;error&quot;</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        <span class="token literal-property property">allowExpressions</span><span class="token operator">:</span> <span class="token boolean">true</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>对于第一份配置：</p><ul><li>需要手动添加 <code>parser</code>, <code>parserOptions</code>, <code>plugins</code></li><li>只开启了 <code>@typescript-eslint/explicit-function-return-type</code> 一个规则</li></ul><p>对于第二份配置：</p><ul><li><code>plugin:@typescript-eslint/recommended</code> 自动添加了 <code>parser</code>, <code>parserOptions</code>, <code>plugins</code></li><li>自动加上一些推荐的 TypeScript 的 ESLint 规则</li><li>自定义了 <code>@typescript-eslint/explicit-function-return-type</code> 规则</li></ul><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">pnpm</span> <span class="token function">add</span> prettier -D
<span class="token function">pnpm</span> <span class="token function">add</span> eslint -D
<span class="token function">pnpm</span> <span class="token function">add</span>  @typescript-eslint/eslint-plugin @typescript-eslint/parser -D
<span class="token function">pnpm</span> <span class="token function">add</span> eslint-config-prettier eslint-plugin-prettier -D
<span class="token function">pnpm</span> <span class="token function">add</span> eslint-plugin-react eslint-plugin-react-hooks -D
<span class="token function">pnpm</span> <span class="token function">add</span> eslint-plugin-import -D
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p><code>eslint-plugin-import </code></p><p>支持 ES2015+ (ES6+) 导入/导出语法的 linting 顾名思义，是对导入的模块进行排序，并防止文件路径和导入名称拼写错误的问题 对比排序前后代码，排序后的代码看起来更整洁，</p><ul><li><a href="https://www.npmjs.com/package/eslint-config-react-app" target="_blank" rel="noopener noreferrer">eslint-config-react-app<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li></ul><h2 id="lint-stage-husky-commitlint" tabindex="-1"><a class="header-anchor" href="#lint-stage-husky-commitlint" aria-hidden="true">#</a> lint-stage, husky, commitlint</h2><p>统一编辑器格式<code>.editorconfig</code></p><div class="language-editorconfig ext-editorconfig line-numbers-mode"><pre class="language-editorconfig"><code><span class="token comment"># Editor configuration, see http://editorconfig.org</span>
<span class="token key attr-name">root</span> <span class="token value attr-value"><span class="token punctuation">=</span> true</span>

<span class="token section selector"><span class="token punctuation">[</span><span class="token operator">*</span><span class="token punctuation">]</span></span>
<span class="token key attr-name">charset</span> <span class="token value attr-value"><span class="token punctuation">=</span> utf-8</span>
<span class="token key attr-name">end_of_line</span> <span class="token value attr-value"><span class="token punctuation">=</span> lf</span>
<span class="token key attr-name">indent_style</span> <span class="token value attr-value"><span class="token punctuation">=</span> space</span>
<span class="token key attr-name">indent_size</span> <span class="token value attr-value"><span class="token punctuation">=</span> 2</span>
<span class="token key attr-name">insert_final_newline</span> <span class="token value attr-value"><span class="token punctuation">=</span> true</span>
<span class="token key attr-name">trim_trailing_whitespace</span> <span class="token value attr-value"><span class="token punctuation">=</span> true</span>

<span class="token section selector"><span class="token punctuation">[</span><span class="token operator">*</span>.md<span class="token punctuation">]</span></span>
<span class="token key attr-name">max_line_length</span> <span class="token value attr-value"><span class="token punctuation">=</span> off</span>
<span class="token key attr-name">trim_trailing_whitespace</span> <span class="token value attr-value"><span class="token punctuation">=</span> false</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p><code>husky</code>用来绑定 <code>Git Hooks</code>,在指定时机（例如 <code>pre-commit</code>）执行我们想要的命令，比如可用于提交代码时进行 <code>eslint</code> 校验，如果有 <code>eslint</code> 报错可阻止代码提交。详细的安装使用方式可参考 <a href="https://typicode.github.io/husky/#/?id=automatic-recommended" target="_blank" rel="noopener noreferrer">Husky 文档<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p><code>lint-staged</code> 能够让<code>lint</code>只检测<code>git缓存区</code>的文件，提升速度。</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">pnpm</span> <span class="token function">add</span> husky lint-staged -D
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>package.json中添加命令</p><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;scripts&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span>
    <span class="token property">&quot;prepare&quot;</span><span class="token operator">:</span> <span class="token string">&quot;husky install &amp; npx only-allow pnpm&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;lint-staged&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;*.{js,jsx,ts,tsx}&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;prettier --write&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;eslint  --fix&quot;</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>或者</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">pnpm</span> i lint-staged husky -D
<span class="token function">pnpm</span> set-script prepare <span class="token string">&quot;husky install&quot;</span> <span class="token comment"># 在package.json中添加脚本</span>
<span class="token function">pnpm</span> run prepare <span class="token comment"># 初始化husky,将 git hooks 钩子交由husky执行</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>接着设置你想要的git hooks</p><p>Husky 初始化完成后，<code>pnpm dlx husky add .husky/commit-msg &quot;npx --no-install commitlint --edit $1&quot;</code></p><p>.husky下会出现文件<code>commit-msg</code>如下</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token shebang important">#!/usr/bin/env sh</span>
<span class="token builtin class-name">.</span> <span class="token string">&quot;<span class="token variable"><span class="token variable">$(</span><span class="token function">dirname</span> -- <span class="token string">&quot;<span class="token variable">$0</span>&quot;</span><span class="token variable">)</span></span>/_/husky.sh&quot;</span>

npx --no-install commitlint --edit 
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>添加 lint-staged</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">pnpm</span> dlx husky <span class="token function">add</span> .husky/pre-commit <span class="token string">&quot;npx --no-install lint-staged&quot;</span> 
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="规范代码提交" tabindex="-1"><a class="header-anchor" href="#规范代码提交" aria-hidden="true">#</a> 规范代码提交</h3><p><code>@commitlint/config-conventional</code> <code>@commitlint/cli</code> 制定了<code>git commit</code>提交规范，团队可以更清晰地查看每一次代码的提交记录</p><p><code>@commitlint/config-conventional</code> 这是一个规范配置，标识采用什么规范来执行消息校验, 这个默认是Angular的提交规范</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">pnpm</span> <span class="token function">add</span> -D @commitlint/config-conventional @commitlint/cli 
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>在项目根目录下创建<code>commitlint.config.js</code></p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token keyword">extends</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;@commitlint/config-conventional&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="使用commitizen规范commit提交格式" tabindex="-1"><a class="header-anchor" href="#使用commitizen规范commit提交格式" aria-hidden="true">#</a> 使用commitizen规范commit提交格式</h3><p><code>commitizen</code> 的作用主要是为了生成标准化的 <code>commit message</code>，符合 <code>Angular</code> 规范。</p><p>一个标准化的 <code>commit message</code> 应该包含三个部分：Header、Body 和 Footer，其中的 Header 是必须的，Body 和 Footer 可以选填。</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>&lt;type&gt;(&lt;scope&gt;): &lt;subject&gt;
// 空一行
&lt;body&gt;
// 空一行
&lt;footer&gt;
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>Header 部分由三个字段组成：type（必需）、scope（可选）、subject（必需）</p><ul><li><p>Type <code>type</code> 必须是下面的其中之一：</p><ul><li>feat: 增加新功能</li><li>fix: 修复 bug</li><li>docs: 只改动了文档相关的内容</li><li>style: 不影响代码含义的改动，例如去掉空格、改变缩进、增删分号</li><li>refactor: 代码重构时使用，既不是新增功能也不是代码的bud修复</li><li>perf: 提高性能的修改</li><li>test: 添加或修改测试代码</li><li>build: 构建工具或者外部依赖包的修改，比如更新依赖包的版本</li><li>ci: 持续集成的配置文件或者脚本的修改</li><li>chore: 杂项，其他不需要修改源代码或不需要修改测试代码的修改</li><li>revert: 撤销某次提交</li></ul></li><li><p>scope</p></li></ul><p>用于说明本次提交的影响范围。<code>scope</code> 依据项目而定，例如在业务项目中可以依据菜单或者功能模块划分，如果是组件库开发，则可以依据组件划分。</p><ul><li>subject</li></ul><p>主题包含对更改的简洁描述：</p><p>注意三点：</p><ol><li>使用祈使语气，现在时，比如使用 &quot;change&quot; 而不是 &quot;changed&quot; 或者 ”changes“</li><li>第一个字母不要大写</li><li>末尾不要以.结尾</li></ol><ul><li>Body</li></ul><p>主要包含对主题的进一步描述，同样的，应该使用祈使语气，包含本次修改的动机并将其与之前的行为进行对比。</p><ul><li>Footer</li></ul><p>包含此次提交有关重大更改的信息，引用此次提交关闭的issue地址，如果代码的提交是不兼容变更或关闭缺陷，则Footer必需，否则可以省略。</p><p>使用方法：</p><p>如果需要在项目中使用 <code>commitizen</code> 生成符合 <code>AngularJS</code> 规范的提交说明，还需要安装 <code>cz-conventional-changelog</code> 适配器。</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">pnpm</span> i commitizen cz-conventional-changelog -D
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>安装指令和命令行的展示信息</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">pnpm</span> set-script commit <span class="token string">&quot;git-cz&quot;</span> <span class="token comment"># package.json 中添加 commit 指令, 执行 `git-cz` 指令</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>初始化commit指令(可能出错)</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">pnpm</span> dlx commitizen init cz-conventional-changelog --save-dev --save-exact
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>或者直接在package.json添加</p><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;config&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;commitizen&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;path&quot;</span><span class="token operator">:</span> <span class="token string">&quot;cz-conventional-changelog&quot;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>接下来就可以使用 <code>$ pnpm commit</code> 来代替 <code>$ git commit</code> 进行代码提交了，看到下面的效果就表示已经安装成功了。</p><p>也可以自定义提交规范，<code>cz-conventional-changelog</code>就可以移除了</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">pnpm</span> i commitlint-config-cz  cz-customizable -D
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>增加 <code>.cz-config.js</code>如下 并修改配置：</p><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;config&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;commitizen&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;path&quot;</span><span class="token operator">:</span> <span class="token string">&quot;node_modules/cz-customizable&quot;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>官方<a href="https://github.com/leoforfree/cz-customizable/blob/master/cz-config-EXAMPLE.js" target="_blank" rel="noopener noreferrer">example<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token string">&quot;use strict&quot;</span><span class="token punctuation">;</span>
module.exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  types: <span class="token punctuation">[</span>
    <span class="token punctuation">{</span> value: <span class="token string">&quot;✨新增&quot;</span>, name: <span class="token string">&quot;新增:    新的内容&quot;</span> <span class="token punctuation">}</span>,
    <span class="token punctuation">{</span> value: <span class="token string">&quot;🐛修复&quot;</span>, name: <span class="token string">&quot;修复:    修复一个Bug&quot;</span> <span class="token punctuation">}</span>,
    <span class="token punctuation">{</span> value: <span class="token string">&quot;📝文档&quot;</span>, name: <span class="token string">&quot;文档:    变更的只有文档&quot;</span> <span class="token punctuation">}</span>,
    <span class="token punctuation">{</span> value: <span class="token string">&quot;💄格式&quot;</span>, name: <span class="token string">&quot;格式:    空格, 分号等格式修复&quot;</span> <span class="token punctuation">}</span>,
    <span class="token punctuation">{</span> value: <span class="token string">&quot;♻️重构&quot;</span>, name: <span class="token string">&quot;重构:    代码重构，注意和特性、修复区分开&quot;</span> <span class="token punctuation">}</span>,
    <span class="token punctuation">{</span> value: <span class="token string">&quot;⚡️性能&quot;</span>, name: <span class="token string">&quot;性能:    提升性能&quot;</span> <span class="token punctuation">}</span>,
    <span class="token punctuation">{</span> value: <span class="token string">&quot;✅测试&quot;</span>, name: <span class="token string">&quot;测试:    添加一个测试&quot;</span> <span class="token punctuation">}</span>,
    <span class="token punctuation">{</span> value: <span class="token string">&quot;🔧工具&quot;</span>, name: <span class="token string">&quot;工具:    开发工具变动(构建、脚手架工具等)&quot;</span> <span class="token punctuation">}</span>,
    <span class="token punctuation">{</span> value: <span class="token string">&quot;⏪回滚&quot;</span>, name: <span class="token string">&quot;回滚:    代码回退&quot;</span> <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>,
  scopes: <span class="token punctuation">[</span>
    <span class="token punctuation">{</span> name: <span class="token string">&quot;javascript&quot;</span> <span class="token punctuation">}</span>,
    <span class="token punctuation">{</span> name: <span class="token string">&quot;typescript&quot;</span> <span class="token punctuation">}</span>,
    <span class="token punctuation">{</span> name: <span class="token string">&quot;react&quot;</span> <span class="token punctuation">}</span>,
    <span class="token punctuation">{</span> name: <span class="token string">&quot;test&quot;</span> <span class="token punctuation">}</span>
    <span class="token punctuation">{</span> name: <span class="token string">&quot;node&quot;</span> <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>,
  // it needs to match the value <span class="token keyword">for</span> field type. Eg.: <span class="token string">&#39;fix&#39;</span>
  /*  scopeOverrides: <span class="token punctuation">{</span>
    fix: <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>name: <span class="token string">&#39;merge&#39;</span><span class="token punctuation">}</span>,
      <span class="token punctuation">{</span>name: <span class="token string">&#39;style&#39;</span><span class="token punctuation">}</span>,
      <span class="token punctuation">{</span>name: <span class="token string">&#39;e2eTest&#39;</span><span class="token punctuation">}</span>,
      <span class="token punctuation">{</span>name: <span class="token string">&#39;unitTest&#39;</span><span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>,  */
  // override the messages, defaults are as follows
  messages: <span class="token punctuation">{</span>
    type: <span class="token string">&quot;选择一种你的提交类型:&quot;</span>,
    scope: <span class="token string">&quot;选择一个scope (可选):&quot;</span>,
    // used <span class="token keyword">if</span> allowCustomScopes is <span class="token boolean">true</span>
    customScope: <span class="token string">&quot;Denote the SCOPE of this change:&quot;</span>,
    subject: <span class="token string">&quot;短说明:<span class="token entity" title="\n">\n</span>&quot;</span>,
    body: <span class="token string">&quot;长说明，使用<span class="token entity" title="\&quot;">\&quot;</span>|<span class="token entity" title="\&quot;">\&quot;</span>换行(可选)：<span class="token entity" title="\n">\n</span>&quot;</span>,
    breaking: <span class="token string">&quot;非兼容性说明 (可选):<span class="token entity" title="\n">\n</span>&quot;</span>,
    footer: <span class="token string">&quot;关联关闭的issue，例如：#31, #34(可选):<span class="token entity" title="\n">\n</span>&quot;</span>,
    confirmCommit: <span class="token string">&quot;确定提交说明?(yes/no)&quot;</span>
  <span class="token punctuation">}</span>,
  allowCustomScopes: true,
  allowBreakingChanges: <span class="token punctuation">[</span><span class="token string">&quot;特性&quot;</span>, <span class="token string">&quot;修复&quot;</span><span class="token punctuation">]</span>,
  // limit subject length
  subjectLimit: <span class="token number">100</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br></div></div><h2 id="analyze" tabindex="-1"><a class="header-anchor" href="#analyze" aria-hidden="true">#</a> analyze</h2><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>webpack --profile --json <span class="token operator">&gt;</span> stats.json
<span class="token function">pnpm</span> i webpack-bundle-analyzer -g 
webpack-bundle-analyzer stats.json 
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="optimization-runtimechunk" tabindex="-1"><a class="header-anchor" href="#optimization-runtimechunk" aria-hidden="true">#</a> <a href="https://webpack.docschina.org/configuration/optimization/#optimizationruntimechunk" target="_blank" rel="noopener noreferrer">optimization.runtimeChunk<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></h2><p>将 optimization.runtimeChunk 设置为 <code>true</code> 或 &#39;multiple&#39;，会为每个入口添加一个只含有 runtime 的额外 chunk。此配置的别名如下：</p><p>webpack.config.js</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  <span class="token literal-property property">optimization</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">runtimeChunk</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token function-variable function">name</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">entrypoint</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">runtime~</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>entrypoint<span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>运行时的chunk文件，形如<code>import(&#39;abc&#39;).then(res=&gt;{})</code>这种异步加载的代码，在webpack中即为运行时代码。比如这样异步引入一个组件：</p><div class="language-tsx ext-tsx line-numbers-mode"><pre class="language-tsx"><code><span class="token keyword">const</span> Button <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">lazy</span><span class="token punctuation">(</span>
  <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token comment">/* webpackChunkName: &quot;Button&quot; */</span> <span class="token string">&#39;./components/Button&#39;</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>如果不设置runtimeChunk，默认是false，第一次打包： <img src="/assets/noruntime-1.ae678ab4.png" alt=""></p><p>修改Button组件后打包: <img src="/assets/noruntime-2.bf5ef0b2.png" alt=""></p><p>可以看到入口文件main的hash也变了。而我们明明只改了button组件。</p><p>可设置runtimeChunk为true</p><blockquote><p>设置runtimeChunk是将包含chunks 映射关系的 list单独从 main.js里提取出来，因为每一个 chunk 的 id 基本都是基于内容 hash 出来的，所以每次改动都会影响它，如果不将它提取出来的话，等于 main.js每次都会改变。缓存就失效了。设置runtimeChunk之后，webpack就会生成一个个<code>runtime~xxx.js</code>的文件。 然后每次更改所谓的运行时代码文件时，打包构建时 main.js的hash值是不会改变的。如果每次项目更新都会更改 main.js的hash值，那么用户端浏览器每次都需要重新加载变化的app.js，如果项目大切优化分包没做好的话会导致第一次加载很耗时，导致用户体验变差。现在设置了runtimeChunk，就解决了这样的问题。所以这样做的目的是避免文件的频繁变更导致浏览器缓存失效，所以其是更好的利用缓存。提升用户体验。</p></blockquote><p>但是这样又有一个问题，runtime.js size很小，如果chunk有变化，这个文件每次构建都会变，多个一个http请求。每次重新构建上线后，浏览器每次都需要重新请求它，它的 http 耗时远大于它的执行时间了，所以建议不要将它单独拆包，而是将它内联到我们的 index.html 之中.</p><p>可使用插件<a href="https://www.npmjs.com/package/script-ext-html-webpack-plugin" target="_blank" rel="noopener noreferrer">script-ext-html-webpack-plugin<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>解决。但这个插件虽然能用，但和webpack5不兼容了。可以使用插件<a href="https://www.npmjs.com/package/hwp-inline-runtime-chunk-plugin" target="_blank" rel="noopener noreferrer">hwp-inline-runtime-chunk-plugin<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>代替。</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  <span class="token literal-property property">optimization</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">runtimeChunk</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token comment">// ...</span>
    <span class="token keyword">new</span> <span class="token class-name">ScriptExtHtmlWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">inline</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">runtime~.+\.js$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h2 id="tree-shaking" tabindex="-1"><a class="header-anchor" href="#tree-shaking" aria-hidden="true">#</a> <a href="https://webpack.js.org/guides/tree-shaking/#root" target="_blank" rel="noopener noreferrer">tree-shaking<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></h2><p>在 Webpack 中，启动 Tree Shaking 功能必须同时满足三个条件：</p><ul><li>使用 ESM 规范编写模块代码(<code>import</code> and<code></code>export`)</li><li>配置 <code>optimization.usedExports</code> 为 true（默认值），启动标记功能</li><li>启动代码优化功能，可以通过如下方式实现： <ul><li>配置 <code>mode = production </code></li><li>配置 <code>optimization.minimize = true </code>（默认值）</li><li>提供 <a href="https://webpack.js.org/configuration/optimization/#optimizationminimizer" target="_blank" rel="noopener noreferrer"><code>optimization.minimizer</code><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> 数组, 注入 <code>Terser</code>（minimize为true时如果不覆盖选项，默认启用，覆盖了要单独引入使用）、<code>UglifyJS</code> 插件</li></ul></li></ul><p>sideEffects</p><p><code>usedExports</code>是检查上下文有没有引用，如果没有引用，就会注入魔法注释，通过<code>terser</code>压缩进行去除未引入的代码</p><p>而<code>sideEffects</code>是对没有副作用的代码进行去除</p><p>css tree shaking</p><p>https://blog.csdn.net/pfourfire/article/details/126505335</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// webpack.config.js</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">entry</span><span class="token operator">:</span> <span class="token string">&quot;./src/index&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">mode</span><span class="token operator">:</span> <span class="token string">&quot;production&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">devtool</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  <span class="token literal-property property">optimization</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">usedExports</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h3 id="webpack-bundle-analyzer" tabindex="-1"><a class="header-anchor" href="#webpack-bundle-analyzer" aria-hidden="true">#</a> webpack-bundle-analyzer</h3><p>每个打包以后的 bundle 文件里面，真正包含哪些内容，项目里的 module、js、component、html、css、img 最后都被放到哪个对应的 bunlde 文件里了。</p><p>每个 bundle 文件里，列出了每一个的 module、componet、js 具体 size，同时会列出 start size、parsed size、gzip size 这三种不同的形式下到底多大，方便优化。</p><ul><li><p>start size：原始没有经过 minify 处理的文件大小</p></li><li><p>parse size：比如 webpack plugin 里用了 uglify，就是 minified 以后的文件大小</p></li><li><p>gzip size：被压缩以后的文件大小</p></li><li><p><a href="https://juejin.cn/post/7038143752036155428" target="_blank" rel="noopener noreferrer">Eslint + Prettier + Husky + Commitlint+ Lint-staged 规范前端工程代码规范<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p></li><li><p><a href="https://juejin.cn/post/7020972849649156110" target="_blank" rel="noopener noreferrer">爆肝从零搭建React+webpack5+Typescript模板<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p></li><li><p><a href="https://www.raulmelo.dev/blog/module-resolution-or-import-alias-the-final-guide" target="_blank" rel="noopener noreferrer">Module Resolution or Import Alias: The Final Guide<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p></li><li><p><a href="https://segmentfault.com/a/1190000040814997" target="_blank" rel="noopener noreferrer">Webpack 原理系列九：Tree-Shaking 实现原理<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p></li><li><p><a href="https://www.basefactor.com/configuring-aliases-in-webpack-vs-code-typescript-jest" target="_blank" rel="noopener noreferrer">Configuring aliases in webpack + VS Code + Typescript + Jest<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p></li></ul><!--]--></div><footer class="page-meta"><!----><div class="meta-item last-updated"><span class="meta-item-label">Last Updated: </span><!----></div><div class="meta-item contributors"><span class="meta-item-label">Contributors: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: xyqinsong@163.com">notend</span><!----><!--]--><!--]--></span></div></footer><!----><!--[--><!--[--><a class="svg-icon-middle toggle-nav-button" title="toggle nav" aria-expanded="false" role="button" tabindex="0"><svg class="svg-icon" aria-hidden="true"><use xlink:href="#icon-menu"></use></svg><!----></a><div class="my-footer">Life is hard, but still have to move on</div><!--]--><!--]--></main><!--]--></div><!----><!----><!--]--></div>
    <script type="module" src="/assets/app.a96f585b.js" defer></script>
  </body>
</html>
